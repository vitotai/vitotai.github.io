var BrewMath={plato2sg:function(a){return 1+a/(258.6-((a/258.2)*227.1))},sgTempCorrected:function(a,F,b){return a*((1.00130346-0.000134722124*F+0.00000204052596*F*F-0.00000000232820948*F*F*F)/(1.00130346-0.000134722124*b+0.00000204052596*b*b-0.00000000232820948*b*b*b))},brix2sg:function(a,b){b=(typeof b==="undefined")?1.0:b;var c=a/b;return(c/(258.6-((c/258.2)*227.1)))+1},sg2plato:function(a){return(1111.14*a)-(630.272*a*a)+(135.997*a*a*a)-616.868}};function C2F(c){return Math.round((c*1.8+32)*10)/10}function F2C(f){return Math.round((f-32)/1.8*10)/10}function setCookie(a,b,c){var d=new Date();d.setTime(d.getTime()+(c*24*60*60*1000));var e="expires="+d.toUTCString();document.cookie=a+"="+b+"; "+e}var BrewData={metrics:false,usePlato:true,refrac_cor:1.0,hydro_ct:68,MLTDeadSpace:0,BKDeadSpace:0.4,evaporationRate:0.33,spargeType:1,batchSpargeNumber:1,grainAbsorb:0.1,hopAbsorb:0,wortExpansionBoil:4,wortExpansionMash:3,batchSize:2.75,grainAmount:5.7,hopAmount:0.028,boilTime:90,brewHouseEfficiency:75,mashThickness:1.25,targetOriginalGravity:1.058,targetOG:function(){return this.targetOriginalGravity},totalGravityPoint:function(){return 37*this.grainAmount},};var UserInputData={fwGravity:0,fwGravityValid:false,fwVolume:0,fwVolumeValid:false,preboilGravity:0,preboilGravityValid:false,preboilVolume:0,preboilVolumeValid:false,postboilGravity:0,postboilGravityValid:false,postboilVolume:0,postboilVolumeValid:false,fermenterVolume:0,fermenterVolumeValid:false};var Unit={L2gal:function(l){return 0.2641720*l},gal2L:function(g){return 3.78541178*g},kg2lb:function(a){return 2.204623*a},lb2kg:function(a){return 0.45359237*a},qt2L:function(q){return 0.946352946*q},L2qt:function(l){return 1.05668821*l},oz2g:function(a){return 28.3495231*a},g2oz:function(g){return 0.0352739619*g},qtlb2lkg:function(r){return 2.086351113*r},lkg2qtlb:function(l){return 0.47930562731*l},gallb2lkg:function(g){return 8.345404452*g},lkg2gallb:function(l){return 0.11982642731*l}};var ExpectedValue={totalWater:function(){var R=BrewData;var p=BrewData;return R.batchSize+p.MLTDeadSpace/(1+p.wortExpansionMash/100)+p.BKDeadSpace+p.evaporationRate*R.boilTime/60+p.grainAbsorb*R.grainAmount+p.hopAbsorb*R.hopAmount/16},mashWater:function(){var p=BrewData;var R=BrewData;var a=this.totalWater();if(p.spargeType==0)return a;var b=R.mashThickness/4*R.grainAmount+p.MLTDeadSpace;return(b>a)?a:b},spargeWater:function(){return this.totalWater()-this.mashWater()},spargeWaterPerBatch:function(){var p=BrewData;if(p.spargeType==1)return this.spargeWater()/p.batchSpargeNumber;else if(p.spargeType==2)return this.spargeWater();return 0},firstWortGravity1BatchSparge:function(){var R=BrewData;var p=BrewData;var t=this;var a=t.firstWortVolume(false);var b=t.mashWater();var c=t.spargeWater();var d=p.grainAbsorb*R.grainAmount;var e=c/(c+p.MLTDeadSpace+d);return 1+t.preboilVolume(false)*(t.preboilGravity()-1)/(a+(b-a)*e)},firstWortGravity2BatchSparge:function(){var R=BrewData;var p=BrewData;var t=this;var a=t.firstWortVolume(false);var b=t.mashWater();var c=t.spargeWater()/2;var d=p.grainAbsorb*R.grainAmount;var e=c/(c+p.MLTDeadSpace+d);return 1+t.preboilVolume(false)*(t.preboilGravity()-1)/(a+(b-a)*e+(b-a-(b-a)*e)*e)},firstWortGravity3BatchSparge:function(){var R=BrewData;var p=BrewData;var t=this;var a=t.firstWortVolume(false);var b=t.mashWater();var c=t.spargeWater()/3;var d=p.grainAbsorb*R.grainAmount;var e=c/(c+p.MLTDeadSpace+d);return 1+t.preboilVolume(false)*(t.preboilGravity()-1)/(a+(b-a)*e+(b-a-(b-a)*e)*e+(b-a-(b-a)*e-(b-a-(b-a)*e)*e)*e)},firstWortGravity:function(){var R=BrewData;var p=BrewData;var t=this;if(p.spargeType==0)return t.preboilGravity();else if(p.spargeType==1){if(p.batchSpargeNumber==1)return t.firstWortGravity1BatchSparge();else if(p.batchSpargeNumber==2)return t.firstWortGravity2BatchSparge();else return t.firstWortGravity3BatchSparge()}else{return t.firstWortGravity3BatchSparge()}},firstWortVolume:function(a){var R=BrewData;var p=BrewData;var t=this;var b=t.mashWater()-p.grainAbsorb*R.grainAmount-p.MLTDeadSpace/(1+p.wortExpansionMash/100);return a?(1+p.wortExpansionMash/100)*b:b},preboilGravity:function(){var R=BrewData;var p=BrewData;var t=this;return 1+(R.targetOG()-1)*t.postboilVolume(false)/t.preboilVolume(false)},preboilVolume:function(a){var R=BrewData;var p=BrewData;var t=this;var b=p.evaporationRate*R.boilTime/60+t.postboilVolume(false);return(a)?b*(1+p.wortExpansionMash/100):b},postboilVolume:function(a){var R=BrewData;var p=BrewData;var b=R.batchSize+p.BKDeadSpace+p.hopAbsorb*R.hopAmount/16;return(a)?b*(1+p.wortExpansionBoil/100):b},maxFirstWortGravity:function(){return 1+BrewData.totalGravityPoint()/ExpectedValue.mashWater()/1000},maxPreBoilGravity:function(){var t=this;var p=BrewData;var R=BrewData;var a=t.firstWortVolume(false);var b=ExpectedValue.spargeWater()/3;var c=R.grainAbsorb*R.grainAmount;var d=b/(b+p.MLTDeadSpace+c);var e=1000*(t.maxFirstWortGravity()-1)*ExpectedValue.mashWater();var f=1000*(t.maxFirstWortGravity()-1)*a;var g=(e-f)*d;var h=(e-f-g)*d;var i=(e-f-g-h)*d;var j=t.preboilVolume(false);return 1+(f+g+h+i)/j/1000},maxOriginalGravity:function(){return 1+BrewData.totalGravityPoint()/ExpectedValue.postboilVolume()/1000},brewhouseEfficiency:function(){return BrewData.batchSize*(BrewData.targetOG()-1)*1000/BrewData.totalGravityPoint()*100},extractEfficiency:function(){var t=this;return(t.firstWortGravity()-1)*t.mashWater()*1000/BrewData.totalGravityPoint()*100},inFermenterVolume:function(){return BrewData.batchSize}};var ProjectedValue={firstWortGravity:function(){var a=UserInputData;return(a.fwGravityValid)?a.fwGravity:ExpectedValue.firstWortGravity()},firstWortVolume:function(a){var b=UserInputData;if(b.fwVolumeValid){return a?b.fwVolume:b.fwVolume/(1+BrewData.wortExpansionMash/100)}return ExpectedValue.firstWortVolume(a)},grainAbsorb:function(a){var t=this;var p=BrewData;if(a)return ExpectedValue.mashWater()*(1+p.wortExpansionMash/100)-t.firstWortVolume(true)-p.MLTDeadSpace/(1+p.wortExpansionMash/100);else return ExpectedValue.mashWater()-t.firstWortVolume(false)-p.MLTDeadSpace/(1+p.wortExpansionMash/100)},preboilGravity1BatchSparge:function(){var t=this;var p=BrewData;var R=BrewData;var a=t.firstWortVolume(false);var b=ExpectedValue.spargeWater();var c=t.grainAbsorb();var d=b/(b+p.MLTDeadSpace+c);var e=1000*(t.firstWortGravity()-1)*ExpectedValue.mashWater();var f=1000*(t.firstWortGravity()-1)*a;var g=(e-f)*d;var h=t.preboilVolume(false);return 1+(f+g)/h/1000},preboilGravity2BatchSparge:function(){var t=this;var p=BrewData;var R=BrewData;var a=t.firstWortVolume(false);var b=ExpectedValue.spargeWater()/2;var c=t.grainAbsorb();var d=b/(b+p.MLTDeadSpace+c);var e=1000*(t.firstWortGravity()-1)*ExpectedValue.mashWater();var f=1000*(t.firstWortGravity()-1)*a;var g=(e-f)*d;var h=(e-f-g)*d;var i=t.preboilVolume(false);return 1+(f+g+h)/i/1000},preboilGravity3BatchSparge:function(){var t=this;var p=BrewData;var R=BrewData;var a=t.firstWortVolume(false);var b=ExpectedValue.spargeWater()/3;var c=t.grainAbsorb();var d=b/(b+p.MLTDeadSpace+c);var e=1000*(t.firstWortGravity()-1)*ExpectedValue.mashWater();var f=1000*(t.firstWortGravity()-1)*a;var g=(e-f)*d;var h=(e-f-g)*d;var i=(e-f-g-h)*d;var j=t.preboilVolume(false);return 1+(f+g+h+i)/j/1000},preboilGravity:function(){var a=UserInputData;if(a.preboilGravityValid)return a.preboilGravity;var R=BrewData;var p=BrewData;var t=this;if(p.spargeType==0)return t.firstWortGravity();else if(p.spargeType==1){if(p.batchSpargeNumber==1)return t.preboilGravity1BatchSparge();else if(p.batchSpargeNumber==2)return t.preboilGravity2BatchSparge();else return t.preboilGravity3BatchSparge()}else{return t.preboilGravity3BatchSparge()}},preboilVolume:function(a){var b=UserInputData;var p=BrewData;if(b.preboilVolumeValid){return a?b.preboilVolume:b.preboilVolume/(1+p.wortExpansionMash/100)}var R=BrewData;var t=this;if(p.spargeType==0)return t.firstWortVolume(a);else{var c=t.grainAbsorb(a);var d;if(a)d=ExpectedValue.totalWater()*(1+p.wortExpansionMash/100)-c-p.MLTDeadSpace;else d=ExpectedValue.totalWater()-c-p.MLTDeadSpace;return d}},postboilVolume:function(a){var b=UserInputData;var p=BrewData;if(b.postboilVolumeValid){return a?b.postboilVolume:b.postboilVolume/(1+p.wortExpansionBoil/100)}var c=this.preboilVolume(false)-BrewData.evaporationRate*BrewData.boilTime/60;return a?c*(1+p.wortExpansionBoil/100):c},postboilGravity:function(){var a=UserInputData;if(a.postboilGravityValid)return a.postboilGravity;var t=this;return 1+(t.preboilGravity()-1)*t.preboilVolume()/t.postboilVolume()},brewhouseEfficiency:function(){var t=this;var p=BrewData;return(t.postboilGravity()-1)*t.inFermenterVolume()*1000/BrewData.totalGravityPoint()*100},extractEfficiency:function(){var t=this;var p=BrewData;return(t.firstWortGravity()-1)*ExpectedValue.mashWater()*1000/BrewData.totalGravityPoint()*100},inFermenterVolume:function(){return UserInputData.fermenterVolumeValid?UserInputData.fermenterVolume:(this.postboilVolume(false)-BrewData.BKDeadSpace)}};var BrewAssistant={updateWater:function(){var a=BrewData.metrics?Unit.gal2L(ExpectedValue.totalWater()):ExpectedValue.totalWater();$("#total-water").text(""+a.toFixed(2));var b=BrewData.metrics?Unit.gal2L(ExpectedValue.mashWater()):ExpectedValue.mashWater();$("#mash-water").text(""+b.toFixed(2));var c=BrewData.metrics?Unit.gal2L(ExpectedValue.spargeWater()):ExpectedValue.spargeWater();$("#sparge-water").text(""+c.toFixed(2));var d=BrewData.metrics?Unit.gal2L(ExpectedValue.spargeWaterPerBatch()):ExpectedValue.spargeWaterPerBatch();$("#batch-sparge-water").text(""+d.toFixed(2))},updateExpected:function(){var a=BrewData.usePlato?BrewMath.sg2plato(ExpectedValue.maxFirstWortGravity()).toFixed(1):ExpectedValue.maxFirstWortGravity().toFixed(3);$("#max-firstwort-gravity").text(""+a);var b=BrewData.usePlato?BrewMath.sg2plato(ExpectedValue.maxPreBoilGravity()).toFixed(1):ExpectedValue.maxPreBoilGravity().toFixed(3);$("#max-preboil-gravity").text(""+b);var c=BrewData.usePlato?BrewMath.sg2plato(ExpectedValue.maxOriginalGravity()).toFixed(1):ExpectedValue.maxOriginalGravity().toFixed(3);$("#max-original-gravity").text(""+c);var d=BrewData.usePlato?BrewMath.sg2plato(ExpectedValue.firstWortGravity()).toFixed(1):ExpectedValue.firstWortGravity().toFixed(3);$("#exp-firstwort-gravity").text(""+d);var e=BrewData.usePlato?BrewMath.sg2plato(ExpectedValue.preboilGravity()).toFixed(1):ExpectedValue.preboilGravity().toFixed(3);$("#exp-preboil-gravity").text(""+e);var f=BrewData.usePlato?BrewMath.sg2plato(BrewData.targetOG()).toFixed(1):BrewData.targetOG().toFixed(3);$("#exp-original-gravity").text(""+f);var g=BrewData.metrics?Unit.gal2L(ExpectedValue.firstWortVolume(true)):ExpectedValue.firstWortVolume(true);$("#exp-firstwort-vol").text(""+g.toFixed(2));var h=BrewData.metrics?Unit.gal2L(ExpectedValue.preboilVolume(true)):ExpectedValue.preboilVolume(true);$("#exp-preboil-vol").text(""+h.toFixed(2));var i=BrewData.metrics?Unit.gal2L(ExpectedValue.postboilVolume(true)):ExpectedValue.postboilVolume(true);$("#exp-postboil-vol").text(""+i.toFixed(2));var j=BrewData.metrics?Unit.gal2L(ExpectedValue.inFermenterVolume()):ExpectedValue.inFermenterVolume();$("#exp-fermenter-vol").text(""+j.toFixed(2));$("#exp-bh-efficiency").text(""+ExpectedValue.brewhouseEfficiency().toFixed(1));$("#exp-extract-efficiency").text(""+ExpectedValue.extractEfficiency().toFixed(1))},updateChange:function(){this.updateWater();this.updateExpected();this.updateProjected()},updateProjected:function(){var a=BrewData.usePlato?BrewMath.sg2plato(ProjectedValue.firstWortGravity()).toFixed(1):ProjectedValue.firstWortGravity().toFixed(3);$("#pro-firstwort-gravity").text(""+a);var b=BrewData.usePlato?BrewMath.sg2plato(ProjectedValue.preboilGravity()).toFixed(1):ProjectedValue.preboilGravity().toFixed(3);$("#pro-preboil-gravity").text(""+b);var c=BrewData.usePlato?BrewMath.sg2plato(ProjectedValue.postboilGravity()).toFixed(1):ProjectedValue.postboilGravity().toFixed(3);$("#pro-original-gravity").text(""+c);var d=BrewData.metrics?Unit.gal2L(ProjectedValue.firstWortVolume(true)):ProjectedValue.firstWortVolume(true);$("#pro-firstwort-vol").text(""+d.toFixed(2));var e=BrewData.metrics?Unit.gal2L(ProjectedValue.preboilVolume(true)):ProjectedValue.preboilVolume(true);$("#pro-preboil-vol").text(""+e.toFixed(2));var f=BrewData.metrics?Unit.gal2L(ProjectedValue.postboilVolume(true)):ProjectedValue.postboilVolume(true);$("#pro-postboil-vol").text(""+f.toFixed(2));$("#pro-bh-efficiency").text(""+ProjectedValue.brewhouseEfficiency().toFixed(1));$("#pro-extract-efficiency").text(""+ProjectedValue.extractEfficiency().toFixed(1));var g=BrewData.metrics?Unit.gal2L(ProjectedValue.inFermenterVolume()):ProjectedValue.inFermenterVolume();$("#pro-fermenter-vol").text(""+g.toFixed(2));$(".stick-og").hide();var h=BrewData.usePlato?BrewMath.sg2plato(BrewData.targetOG()).toFixed(1):BrewData.targetOG().toFixed(3);if(c>h){$("#adjust-dilution").show();var i=(ProjectedValue.postboilGravity()-1)*ProjectedValue.postboilVolume()/(BrewData.targetOG()-1);var j=i-ProjectedValue.postboilVolume();i=i*(1+BrewData.wortExpansionBoil/100);if(BrewData.metrics)i=Unit.gal2L(i);$("#adjusted-volume").text(i.toFixed(2));var g=j+ProjectedValue.inFermenterVolume();if(BrewData.metrics)g=Unit.gal2L(g);$("#adjusted-ferm-volume").text(g.toFixed(2));if(BrewData.metrics)j=Unit.gal2L(j);$("#adjusted-added-water").text(j.toFixed(2))}else if(c<h){$("#adjust-dme").show();var k=(BrewData.targetOG()-ProjectedValue.postboilGravity())*ProjectedValue.postboilVolume()/0.044*16;$("#adjusted-added-dme").text(BrewData.metrics?Math.round(Unit.oz2g(k)):k.toFixed(1));$("#adjust-boil").show();var l=(ProjectedValue.postboilGravity()-1)*ProjectedValue.postboilVolume()/(BrewData.targetOG()-1);var m=ProjectedValue.postboilVolume()-l;var n=m/BrewData.evaporationRate*60;var o=l-BrewData.BKDeadSpace;$("#adjusted-boil-time").text(Math.round(n));l=l*(1+BrewData.wortExpansionBoil/100);if(BrewData.metrics)l=Unit.gal2L(l);$("#adjusted-shrink-volume").text(l.toFixed(2));if(BrewData.metrics)o=Unit.gal2L(o);$("#adjusted-shrink-ferm-volume").text(o.toFixed(2))}},showGravityUnit:function(){if(BrewData.usePlato){$(".plato-unit").show()}else{$(".plato-unit").hide()}},gravityUnitChanged:function(){this.showGravityUnit();this.updateExpected();this.updateProjected();var a=BrewData.usePlato?BrewMath.sg2plato(BrewData.targetOG()).toFixed(1):BrewData.targetOG().toFixed(3);$("#target-og").val(a);if(UserInputData.fwGravityValid){var b=BrewData.usePlato?BrewMath.sg2plato(UserInputData.fwGravity).toFixed(1):UserInputData.fwGravity;$("#i-fw-sg").val(b)}if(UserInputData.preboilGravityValid){var c=BrewData.usePlato?BrewMath.sg2plato(UserInputData.preboilGravity).toFixed(1):UserInputData.preboilGravity;$("#i-pb-sg").val(c)}if(UserInputData.postboilGravityValid){var d=BrewData.usePlato?BrewMath.sg2plato(UserInputData.postboilGravity).toFixed(1):UserInputData.postboilGravity;$("#i-final-sg").val(d)}},showUnit:function(){if(BrewData.metrics){$(".imperial").hide();$(".metrics").show()}else{$(".imperial").show();$(".metrics").hide()}},unitChanged:function(){this.showUnit();this.init_input();this.updateWater();this.updateChange()},input_map:{MLTDeadSpace:{i:"mlt-deadspace",t:"vol1",r:2},BKDeadSpace:{i:"bk-deadspace",t:"vol1",r:2},evaporationRate:{i:"boiloff-rate",t:"vol1",r:2},grainAbsorb:{i:"grain-absorb",t:"vol1wt1",r:3},hopAbsorb:{i:"hop-absorb",t:"vol1wt1",r:3},wortExpansionBoil:{i:"wort-boil-exp-rate",t:null,r:1},wortExpansionMash:{i:"wort-mash-exp-rate",t:null,r:1},batchSpargeNumber:{i:"batch-sparge-number",t:null,r:0},batchSize:{i:"batch-size",t:"vol1",r:2},grainAmount:{i:"grain-amount",t:"wt1",r:2},hopAmount:{i:"hop-amount",t:"wt2",r:2},boilTime:{i:"boil-time",t:null,r:0},brewHouseEfficiency:{i:"bh-efficiency",t:"eff",r:1},mashThickness:{i:"mash-thickness",t:"vol2wt",r:2},targetOriginalGravity:{i:"target-og",t:null,r:3}},init_input:function(){$.each(this.input_map,function(a,b){var c=BrewData[a];if(BrewData.metrics){if(b.t=="vol1")c=Unit.gal2L(c);else if(b.t=="vol1wt1")c=Unit.gallb2lkg(c);else if(b.t=="wt1")c=Unit.lb2kg(c);else if(b.t=="wt2")c=Unit.oz2g(c);else if(b.t=="vol2wt")c=Unit.qtlb2lkg(c)}if($("#"+b.i).hasClass("gravity-input")){if(BrewData.usePlato)c=BrewMath.sg2plato(c).toFixed(1);else c=c.toFixed(3);$("#"+b.i).val(c)}else{$("#"+b.i).val(c.toFixed(b.r))}})},setCookie:function(k){if(typeof(BrewData[k])=="boolean"){setCookie(k,BrewData[k]?"1":"0",30)}else{setCookie(k,BrewData[k],30)}},getSettings:function(){var d=document.cookie.split(';');for(var i=0;i<d.length;i++){var p=d[i].split('=');if(p&&p.length>1){var k=p[0].trim();var v=p[1].trim();if(typeof BrewData[k]!="undefined"){if(typeof(BrewData[k])=="boolean")BrewData[k]=(v!="0");else BrewData[k]=parseFloat(v)}}}},init:function(){var t=this;t.getSettings();$("input:radio[name='gravity-unit']").filter('[value="'+(BrewData.usePlato?1:0)+'"]').prop("checked",true);$("input:radio[name='gravity-unit']").change(function(){BrewData.usePlato=($("input:radio[name='gravity-unit']:checked").val()==1);t.setCookie("usePlato");t.gravityUnitChanged()});this.showGravityUnit();$("input:radio[name='metrics']").filter('[value="'+(BrewData.metrics?1:0)+'"]').prop("checked",true);$("input:radio[name='metrics']").change(function(){BrewData.metrics=($("input:radio[name='metrics']:checked").val()==1);t.setCookie("metrics");t.unitChanged()});t.showUnit();if(BrewData.spargeType==0)$(".fwcalrow").hide();$("input:radio[name='sparge-type']").filter('[value="'+BrewData.spargeType+'"]').prop("checked",true);$("input:radio[name='sparge-type']").change(function(){BrewData.spargeType=$("input:radio[name='sparge-type']:checked").val();t.setCookie("spargeType");if(BrewData.spargeType==0)$(".fwcalrow").hide();else $(".fwcalrow").show();t.updateChange()});$.each(t.input_map,function(b,c){$("#"+c.i).change(function(){var a=parseFloat($(this).val());if(BrewData.metrics){if(c.t=="vol1")a=Unit.L2gal(a);else if(c.t=="vol1wt1")a=Unit.lkg2gallb(a);else if(c.t=="wt1")a=Unit.kg2lb(a);else if(c.t=="wt2")a=Unit.g2oz(a);else if(c.t=="vol2wt")a=Unit.lkg2qtlb(a)}if($("#"+c.i).hasClass("gravity-input")){if(BrewData.usePlato)a=BrewMath.plato2sg(a)}BrewData[b]=a;t.setCookie(b);if(b=="grainAmount"){BrewData.targetOriginalGravity=1+0.001*BrewData.totalGravityPoint()*BrewData.brewHouseEfficiency/100/BrewData.batchSize;$("#"+t.input_map.targetOriginalGravity.i).val(BrewData.usePlato?BrewMath.sg2plato(BrewData.targetOriginalGravity).toFixed(1):BrewData.targetOriginalGravity.toFixed(3));t.setCookie("targetOriginalGravity")}else if(b=="brewHouseEfficiency"){BrewData.targetOriginalGravity=1+0.001*BrewData.totalGravityPoint()*BrewData.brewHouseEfficiency/100/BrewData.batchSize;$("#"+t.input_map.targetOriginalGravity.i).val(BrewData.usePlato?BrewMath.sg2plato(BrewData.targetOriginalGravity).toFixed(1):BrewData.targetOriginalGravity.toFixed(3));t.setCookie("targetOriginalGravity")}else if(b=="targetOriginalGravity"){BrewData.brewHouseEfficiency=(BrewData.targetOriginalGravity-1)*1000*BrewData.batchSize/BrewData.totalGravityPoint()*100;$("#"+t.input_map.brewHouseEfficiency.i).val(BrewData.brewHouseEfficiency.toFixed(1));t.setCookie("brewHouseEfficiency")}t.updateChange()})});var f={fwVolume:"i-fw-vol",preboilVolume:"i-pb-vol",postboilVolume:"i-final-vol",fermenterVolume:"i-fermenter-vol"};$.each(f,function(a,b){$("#"+b).change(function(){var v=parseFloat($(this).val());if(isNaN(v)||v==0){UserInputData[a+"Valid"]=false}else{if(BrewData.metrics)v=Unit.L2gal(v);UserInputData[a]=v;UserInputData[a+"Valid"]=true}t.updateProjected()})});$("#refrac-correction").val(BrewData.refrac_cor);var g=BrewData.hydro_ct;if(BrewData.metrics)g=F2C(g).toFixed(1);$("#corrected-temp").val(g);$("#hydro-temp").val(g);var h={fwGravity:"i-fw-sg",preboilGravity:"i-pb-sg",postboilGravity:"i-final-sg"};$.each(h,function(a,b){$("#"+b).focus(function(){window.focusinput=a;$('#dlg_sginput').modal();$('#dlg_sginput_label').text($(this).attr("dlg-title"))})});$("#dlg_sginput button.btn-primary").click(function(){var a=window.focusinput;if(typeof window.inputgravity!="undefined"){$('#dlg_sginput').modal('hide');if(isNaN(window.inputgravity)){UserInputData[a+"Valid"]=false;$("#"+h[a]).val("")}else{$("#"+h[a]).val(window.inputgravity);t.setCookie("hydro_ct");t.setCookie("refrac_cor");var v=BrewData.usePlato?BrewMath.plato2sg(window.inputgravity):window.inputgravity;UserInputData[a]=parseFloat(v);UserInputData[a+"Valid"]=true}t.updateProjected()}});t.init_input();t.updateChange();$("input.refrac-input").keyup(function(){var a=parseFloat($("#refrac-reading").val());var b=parseFloat($("#refrac-correction").val());if(isNaN(a)||isNaN(b)){window.inputgravity=NaN;return}BrewData.refrac_cor=b;var c=a/b;var d=BrewData.usePlato?c.toFixed(1):BrewMath.plato2sg(c).toFixed(3);$("#refrac-value").text(d);window.inputgravity=d});$("input.hydro-input").keyup(function(){var a=parseFloat($("#hydro-reading").val());var b=parseFloat($("#hydro-temp").val());var c=parseFloat($("#corrected-temp").val());if(isNaN(a)||isNaN(b)||isNaN(c)){window.inputgravity=NaN;return}if(BrewData.metrics){b=C2F(b);c=C2F(c)}BrewData.hydro_ct=c;if(BrewData.usePlato)a=BrewMath.plato2sg(a);var d=BrewMath.sgTempCorrected(a,b,c);var e=BrewData.usePlato?BrewMath.sg2plato(d).toFixed(1):d.toFixed(3);$("#hydro-value").text(e);window.inputgravity=e})}};