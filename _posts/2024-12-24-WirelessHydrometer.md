---
title: '家釀無線比重隨筆'
date: '2024-12-24T14:50:35+00:00'
author: Vito
layout: post
categories:
    - 釀酒筆記
---
這只是一篇關於「家釀」用的「無線比重計」的經驗、心得、以及感想。

結論先行，我現在用的是Kegland的Pill，如果你有在考慮，這是不會太差的選擇；它的優點是：
- 可以用Bluetooth/BLE或WiFi
- 價格相對便宜
- 可以無線充電
- 外殼設計不錯，而且容易買到替換品。外殼的接縫在中間，而高泡酵母留下的殘渣（Krausen ring）會在比較接近最上面，這部分剛好是沒有縫隙的，非常容易清潔。外殼銜接的地方有用兩個墊圈，也是讓人放心的設計。
缺點：
- 用WiFi的話，要用Kegland的雲端服務。（但用Bluetooth/BLE則不用，但需要另一個設備讀取資訊）
- 外殼感覺有點薄。

iSpindel是我用最久的東西，事實上我也有稍微貢獻一點東西；iSpinde的HTML版校正程式是我寫的。
它的優點是：
- open source，可以自己搞；在可以自己搞的前提下，它的缺點其實在於製作者的能力限制；如果製作者的沒有任何能力限制，可以消除任何缺點。
- 正統的iSpindel是用ESP8266，用WiFi，但有已經有出現類似的改良版本[GravityMon](https://www.homebrewtalk.com/threads/replacement-firmware-for-ispindel-gravitymon.698058/)，除了支援ESP32，也多了許多功能.

缺點：
- 自己搞很麻煩，買現成的價格和Pill差不多。
- 標準的外殼是保特瓶的胚，除了難買，每一批的大小型狀都有些差異，而且開蓋處正好是最容易累積殘渣的地方，即使可以做成無線充電，可能也需要開蓋清潔。


iSpindel適合有能力且喜歡自己動手做的人。以我的經驗，保特瓶胚是最大的問題，因為有進麥汁的經驗，每次我都鎖太緊，結果後來把蓋子鎖壞了。但是已經有人設計出了可以用[Pill外殼的PCB](https://www.homebrewtalk.com/threads/ispindel-gravitymon-pill-pcb.732700/)，用這個就可以用Pill的外殼。

至於Tilt，我沒有用過，所以我沒有有用的資訊提供，要說的話只有一點：愈大和重的東西，受氣泡的影響愈小，量測到的值也就比較穩定，這是物理法則。另外，Tilt一直都是用Bluetooth/BLE，所以需要另一個設備讀取的小問題。

那麼，這些無線比重計準確嗎？簡單地說，和一般的比重計一樣準確。這些無線比重計的原理和一般比重計是一模一樣的，靠的是液體的的浮力變化來測量比重，因為浮力會隨著比重而變化的。差別在於一般比重計用「眼睛」來看「高低」，而無線比重計用「感測器」來測量「傾斜角」。一般比重計在生產時已經把校正好的刻度標在上面，而無線比重計如果像Pill和Tilt都出廠時也已經有校正資料，但如果是自已做的，便需要自己校正。一般來說，我相信「感測器」會比「眼睛」準確，所以問題在於「刻度的正確」（無線比重器就是校正數據）；如果提供了精確而且足夠的數據，無線比重計會比一般比重計好。但是，因為無線比重計是放在發酵桶中隨著發酵進行同時測量的，發酵中產生的氣泡和高泡（Krausen）會附在比重計上，影響讀數。這是無法避免的問題，但是用大一點、重一點的無線比重器，可以減少氣泡造成的影響；Tilt後來出的Pro版其中一個改變就是變大變重。其實在無線比重器出現前，不乏有人想把一般比重器丟到透明發酵桶的，但通常試過一次就會放棄。

「傾斜角」如何換算成比重？[iSpindel官網](https://www.ispindel.de)有原理說明，就結論來說，浮力是「傾斜角」的反正切(arctangent)函式，而浮力和比重成正比，所以只要找出正確的函式就可以正確的計算出比重。但實務上，因為幾乎無法正確無誤地測量比重（例如，1.01001和1.0099999在數學上是不一樣的，但實際上無法分辨），加上感測器本身也是會有誤差，所以找出對應的反正切函式幾乎是不可能。我不太清楚Tilt或Pill原廠的公式如何計算，在iSpindel中，是採用迴歸分析的方式來得到一個接近的多項式。如果採樣的數值良好正確，大約4個點就可以得一個比一般比重器更準確的3次多項式。

利用浮力來推算比重的一個問題是重心不能改變；傳統的比重器不能打開也不會打開，但無線比重器會有需要打開換電池或維護的情況，一旦重心有所改變，原本校正的數據就會產生偏差，結果就會變得不準。這個問題在自製的iSpindel上可能是最嚴重的，而Pill和Tilt可能因為是定製的產品，似乎不會有太大的偏差。當然如果有能力，也可以做出很完美的iSpindel。要避免重心跑掉的一個做法就是不要打開蓋子，避免重心移動，所以可以用無線充電會是比較好的方案。

無線比重計最主要的優勢就是隨時監測比重，而以我使用Pill和iSpindel的經驗，它們的精細度比傳統比重計高上許多；下圖是我的某次拉格剛接種後的比重變化，右軸顯示的是比重少掉**1.**的數值，記錄開始的比重約在 1.0524，大約在時間軸08:00時，也就是接種後11-12小時的時候，己經可以看見比重開始變化了。而這個變化其實也才0.0005左右。

![接種後的比重變化](/wp-content/2025-01/fermentation_start.jpg)

下面這張圖則是發酵接近結束的比重變化，這張圖的時間跨度是4天多，比重變化是從1.0132到1.0127左右，如果以一般習慣來看，都是1.013，連續4天比重沒有變化？實際上卻有0.0005的變化，而這個差異以我的眼力，在我的0.002一格的比重計是鐵定看不出來的。

![發酵接近結束的比重變化](/wp-content/2025-01/fermentation_end.jpg)

即使受限於校正資訊的精確度，所計算出來的比重有誤差，但是**比重變化**這件事確實是可以測量的出來的，這是我認為無線比重計最實用的部分。事實上有些人根本不在意校正數據的準確度，他們只是用來看比重（或是傾斜角度）是否有變化。就這個功用來說，無線比重器是相當有用的。

**前方高能，閱覽小心**

底下的內容是我還在思考驗證的，可能存在錯誤或沒想清楚的部分，可以略過。


到目前為止，無線比重計存在一個我沒有解決或解答的問題：溫度補償。(就寫到這裏，瞪著下面的圖表時，突然有了解決方案的靈感，不過，就先完成這篇。)無線比重計的物理原理和傳統比重計一樣，實際上都是測量**浮力**，而水的熱脹冷縮造成的浮力不同，當然一樣會影響讀數，不幸的是，除了水的浮力，溫度還影響了其他東西：[感測器因為溫度變化產生的偏移](https://github.com/universam1/iSpindel/issues/6)以及（我猜想的）無線比重計本身的熱脹冷縮。只是套用比重的溫度補償，即使比重沒有變化，溫度的變化會讓無線比重器的讀數產生變化。有趣的是，溫度下降時，(我的)iSpindel的讀數會**上升**（即使在溫度補償後），但Pill的讀數則會**下降**。

針對Pill我還做了一些測試，分別是放在**水**，以及只是固定在一個角度（放在一個乾的杯子中，用東西卡住，而且只看傾斜角讀數的變化；下面兩張圖是記錄Pill在空氣中及水中，傾斜角讀數相對溫度的變化。第一張是沒有放在水中，只是固定一個角度；第二張是放在水中。

![固定角度傾斜角讀數變化](/wp-content/2025-01/pill_in_air.jpg)

![水中傾斜角讀數變化](/wp-content/2025-01/pill_in_water.jpg)

比重愈大，浮力愈大，傾斜角就愈大；水的密度因溫度下降而變大，所以浮力會變大，沒有其他因素在時，應該傾斜角會**變大/上升**。
，但Pill很奇怪地在水中反而**變小/下降**，更奇怪的是Pill的感測器在溫度下降時，讀數是**變大/上升**的。照理說，溫度下降時，水的浮力變大加上
感測器本身的偏移也是變大，讀數應該是變更大，但結果卻是相反，表示其在**水**中的偏移並不是只是來自感測器的偏移；我能想到的可能之一是無線比重計本身的熱脹冷縮。有沒有可能是軟體的"修正"呢？因為這個傾斜角讀數是沒有公開原始碼的Pill的軔體報出來，其實我們並不知道它是怎麼得到的。如果Pill有辦法辨別它是浮在水中還是被固定角度卡在空中，的確有可能有軟體介入修正，不過考慮到現實的複雜度，我認為這個可能性很低。

為了得到更多數據，我又用水做了一次實驗，因為這幾天室溫在20度上下，但我希望取得30度左右的數據，所以加了一些溫水調成30幾度，再把放在室溫中的Pill放進去，結果又出現了出乎意外的結果：傾斜角一開始是**上升**的，過了幾個小時後，才隨著溫度**下降**。用熱脹冷縮的理論來解釋是：溫度**下降**，體積縮小的效應讓傾斜角**變小**，當在20度室溫的Pill放進35度的水中時，一開始體積是**膨脹**的 ，所以傾斜角**上升**，到了一個程度後，才又隨著溫度下降而**縮小**，傾斜角也跟著**下降**。如果不用熱脹冷縮的理論的理論，就有可能是感測器在30幾度左右的某個點，偏移方向會反轉。在夏天時再做一次實驗應該就能知道感測器會不會反轉。 

![先升後降](/wp-content/2025-01/pill_warmer_water.jpg)


參考：
- [compensate temperature drift of Acceleromete](https://github.com/universam1/iSpindel/issues/6)
- [Homebrewtalk.com: Can it event be done? measure specific gravity using arduino or raspberry pi](https://www.homebrewtalk.com/threads/can-it-even-be-done-measuring-specific-gravity-using-arduino-or-raspberry-pi.385352/)
- [Homebrewtalk.com: Replacement firmware for iSpindel(GravityMon)](https://www.homebrewtalk.com/threads/replacement-firmware-for-ispindel-gravitymon.698058/)
- [Homebrewtalk.com: iSpindel- DIY Electronic Hydrometer](https://www.homebrewtalk.com/threads/ispindle-diy-electronic-hydrometer.598187/)
- [Homebrewtalk.com: iSindel/Gravitymon Pill PCB](https://www.homebrewtalk.com/threads/ispindel-gravitymon-pill-pcb.732700/)
- [iSpindel官網](https://www.ispindel.de)